{"ast":null,"code":"var _jsxFileName = \"/Users/rique/Desktop/Side Projects/air-bed--React_Project/frontend/src/components/display/searchForm/searchForm.js\";\nimport React, { Component } from 'react';\nimport Moment from 'moment';\nimport { extendMoment } from 'moment-range';\nimport { Link, withRouter } from 'react-router-dom';\n\nvar SearchForm = function SearchForm(props) {\n  if (!props) return null;\n  console.log(props);\n  var moment = extendMoment(Moment);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    var booking = {\n      \"location\": event.target.location.value,\n      \"checkIn\": event.target.checkIn.value,\n      \"checkOut\": event.target.checkOut.value,\n      \"dateRange\": null\n    };\n    var start = booking.checkIn;\n    var end = booking.checkOut;\n    var range = moment.range(start, end);\n    checkOverlap(range);\n    booking.dateRange = range;\n    console.log(booking.dateRange); // console.log(booking.location)\n\n    props.handleLocationChange(booking);\n    props.handleSelectedDateRange(booking);\n  }\n\n  function checkOverlap(inputRange) {\n    // grab existing user bookings with start and end dates to form moment.range objects\n    var filteredBookings = props.fullData;\n    var rangeListsPerProp = filteredBookings.map(function (prop) {\n      if (!prop) return null;\n      return prop.users.map(function (user) {\n        console.log(user.endDate.slice(0, 10), user.endDate.slice(0, 10));\n        var sd = moment(user.startDate.slice(0, 10), 'YYYY-MM-DD');\n        var ed = moment(user.endDate.slice(0, 10), 'YYYY-MM-DD');\n        var rangeObject = moment.range(sd, ed);\n        return rangeObject;\n      });\n    });\n    console.log(filteredBookings);\n    console.log(rangeListsPerProp); // compare each booking range within the rangeList with inputRange\n\n    console.log(inputRange);\n    var noOverlapList = rangeListsPerProp.map(function (perRange, index) {\n      if (perRange.length === 0) {\n        return filteredBookings[index];\n      } else {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = perRange[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var range = _step.value;\n\n            if (range.overlaps(inputRange)) {\n              // return null if there is an overlap\n              console.log(range.overlaps(inputRange));\n              return null;\n            } // else return the property to the list noOverlapList\n\n\n            return filteredBookings[index];\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      }\n    });\n    console.log(noOverlapList);\n    var displayList = noOverlapList.filter(function (prop) {\n      return prop !== null;\n    }); // console.log(props.passToApp);\n    // debugger;\n\n    props.passToApp(displayList);\n    props.history.push(\"/properties\");\n  }\n\n  console.log(props.filteredLocationOptions);\n  var locations = props.filteredLocationOptions.map(function (location, index) {\n    return React.createElement(\"option\", {\n      key: index,\n      value: location,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, location);\n  });\n  return React.createElement(\"div\", {\n    className: \"search-form-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"search-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Find homes all over the world on whereBnB\"), React.createElement(\"p\", {\n    className: \"search-sub-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"Discover entire homes and private rooms perfect for any trip.\"), React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    className: \"select-box\",\n    name: \"location\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, locations), React.createElement(\"div\", {\n    className: \"search-date-pickers-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"check-in-picker\",\n    type: \"date\",\n    placeholder: \"Check-in\",\n    name: \"checkIn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    className: \"date-arrow\",\n    src: \"/images/DateArrow.png\",\n    alt: \"Logo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"check-out-picker\",\n    type: \"date\",\n    placeholder: \"Check-out\",\n    name: \"checkOut\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"search-form-btn\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"Search\")));\n};\n\nexport default withRouter(SearchForm);","map":{"version":3,"sources":["/Users/rique/Desktop/Side Projects/air-bed--React_Project/frontend/src/components/display/searchForm/searchForm.js"],"names":["React","Component","Moment","extendMoment","Link","withRouter","SearchForm","props","console","log","moment","handleSubmit","event","preventDefault","booking","target","location","value","checkIn","checkOut","start","end","range","checkOverlap","dateRange","handleLocationChange","handleSelectedDateRange","inputRange","filteredBookings","fullData","rangeListsPerProp","map","prop","users","user","endDate","slice","sd","startDate","ed","rangeObject","noOverlapList","perRange","index","length","overlaps","displayList","filter","passToApp","history","push","filteredLocationOptions","locations"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Moment from 'moment';\nimport {extendMoment} from 'moment-range';\nimport { Link, withRouter } from 'react-router-dom';\n\n\nconst SearchForm = (props) => {\n\n  if(!props) return null;\n  console.log(props);\n\n  const moment = extendMoment(Moment);\n\n  function handleSubmit(event){\n    event.preventDefault();\n    const booking = {\n      \"location\": event.target.location.value,\n      \"checkIn\": event.target.checkIn.value,\n      \"checkOut\": event.target.checkOut.value,\n      \"dateRange\": null\n    }\n\n    const start = booking.checkIn\n    const end = booking.checkOut\n\n    const range = moment.range(start, end)\n\n    checkOverlap(range)\n\n    booking.dateRange = range;\n    console.log(booking.dateRange);\n    // console.log(booking.location)\n\n    props.handleLocationChange(booking)\n    props.handleSelectedDateRange(booking)\n  }\n\n  function checkOverlap(inputRange){\n\n    // grab existing user bookings with start and end dates to form moment.range objects\n\n    const filteredBookings = props.fullData\n\n    const rangeListsPerProp = filteredBookings.map(prop =>{\n\n      if(!prop) return null;\n\n      return prop.users.map(user => {\n        console.log(user.endDate.slice(0,10), user.endDate.slice(0,10));\n        const sd = moment(user.startDate.slice(0,10), 'YYYY-MM-DD');\n        const ed = moment(user.endDate.slice(0,10), 'YYYY-MM-DD');\n        const rangeObject = moment.range(sd, ed)\n\n        return rangeObject;\n      })\n    })\n\n    console.log(filteredBookings)\n    console.log(rangeListsPerProp)\n\n    // compare each booking range within the rangeList with inputRange\n\n    console.log(inputRange)\n\n\n    const noOverlapList = rangeListsPerProp.map((perRange, index) => {\n      if (perRange.length === 0) {\n        return filteredBookings[index];\n      }else{\n        for(let range of perRange) {\n          if (range.overlaps(inputRange)){\n            // return null if there is an overlap\n            console.log(range.overlaps(inputRange))\n            return null;\n          }\n          // else return the property to the list noOverlapList\n          return filteredBookings[index]\n        }\n      }\n    })\n\n    console.log(noOverlapList)\n\n    const displayList = noOverlapList.filter(prop => prop !== null)\n\n    // console.log(props.passToApp);\n    // debugger;\n    props.passToApp(displayList)\n    props.history.push(\"/properties\");\n  }\n\n  console.log(props.filteredLocationOptions)\n\n  const locations = props.filteredLocationOptions.map((location, index) => {\n    return <option key={index} value={location}>{location}</option>\n})\n\nreturn(\n  <div className=\"search-form-container\">\n    <h2 className=\"search-header\">Find homes all over the world on whereBnB</h2>\n  <p className=\"search-sub-header\">Discover entire homes and private rooms perfect for any trip.</p>\n<form onSubmit={handleSubmit}>\n  <select className=\"select-box\" name=\"location\">\n    {locations}\n\n  </select>\n  <div className=\"search-date-pickers-container\">\n    <input className=\"check-in-picker\" type=\"date\" placeholder=\"Check-in\" name=\"checkIn\" />\n  <img className=\"date-arrow\" src=\"/images/DateArrow.png\" alt=\"Logo\"/>\n<input className=\"check-out-picker\" type=\"date\" placeholder=\"Check-out\" name=\"checkOut\" />\n</div>\n<button className=\"search-form-btn\" type=\"submit\">Search</button>\n</form>\n</div>\n)\n\n}\n\nexport default withRouter(SearchForm);\n"]},"metadata":{},"sourceType":"module"}