{"ast":null,"code":"import _classCallCheck from \"/Users/rique/Desktop/Side Projects/air-bed--React_Project/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rique/Desktop/Side Projects/air-bed--React_Project/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rique/Desktop/Side Projects/air-bed--React_Project/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rique/Desktop/Side Projects/air-bed--React_Project/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rique/Desktop/Side Projects/air-bed--React_Project/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/rique/Desktop/Side Projects/air-bed--React_Project/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/rique/Desktop/Side Projects/air-bed--React_Project/frontend/src/components/display/searchForm/searchFormBox.js\";\nimport './Search.css';\nimport React, { Component } from 'react';\nimport SearchForm from './searchForm';\nimport Request from '../../../helpers/Request';\n\nvar SearchFormBox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchFormBox, _Component);\n\n  function SearchFormBox(props) {\n    var _this;\n\n    _classCallCheck(this, SearchFormBox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchFormBox).call(this, props));\n    _this.state = {\n      data: null,\n      selectedLocation: null,\n      selectedDateRange: null\n    };\n    _this.filterLocationData = _this.filterLocationData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.findLocations = _this.findLocations.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleLocationChange = _this.handleLocationChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSelectedDateRange = _this.handleSelectedDateRange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SearchFormBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var request = new Request();\n      request.get('/api/properties').then(function (data) {\n        _this2.setState({\n          data: data\n        });\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevState) {\n      if (prevState !== this.state.data) {\n        this.filterLocationData();\n      }\n    }\n  }, {\n    key: \"findLocations\",\n    value: function findLocations() {\n      if (!this.state.data._embedded.properties) return null;\n\n      var locations = this.state.data._embedded.properties.map(function (location) {\n        return location.location;\n      });\n\n      return locations;\n    }\n  }, {\n    key: \"filterLocationData\",\n    value: function filterLocationData() {\n      var newLocations = this.findLocations();\n      var filteredData = newLocations.filter(function (location, pos, self) {\n        return self.indexOf(location) === pos;\n      });\n      console.log(filteredData);\n      return filteredData;\n    }\n  }, {\n    key: \"handleLocationChange\",\n    value: function handleLocationChange(booking) {\n      console.log(booking.location);\n      if (!booking) return null;\n      this.setState({\n        selectedLocation: booking.location\n      });\n    }\n  }, {\n    key: \"handleSelectedDateRange\",\n    value: function handleSelectedDateRange(booking) {\n      if (!booking) return null;\n      this.setState({\n        selectedDateRange: booking.dateRange\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.data) return null;\n      return React.createElement(\"div\", {\n        className: \"search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search-header-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(SearchForm, {\n        handleSelectedDateRange: this.handleSelectedDateRange,\n        handleLocationChange: this.handleLocationChange,\n        filteredLocationOptions: this.filterLocationData(),\n        fullData: this.state.data._embedded.properties,\n        passToApp: this.props.passToApp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return SearchFormBox;\n}(Component);\n\nexport default SearchFormBox;","map":{"version":3,"sources":["/Users/rique/Desktop/Side Projects/air-bed--React_Project/frontend/src/components/display/searchForm/searchFormBox.js"],"names":["React","Component","SearchForm","Request","SearchFormBox","props","state","data","selectedLocation","selectedDateRange","filterLocationData","bind","findLocations","handleLocationChange","handleSelectedDateRange","request","get","then","setState","prevState","_embedded","properties","locations","map","location","newLocations","filteredData","filter","pos","self","indexOf","console","log","booking","dateRange","passToApp"],"mappings":"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","sourcesContent":["\nimport './Search.css'\nimport React, { Component } from 'react'\nimport SearchForm from './searchForm'\nimport Request from '../../../helpers/Request';\n\nclass SearchFormBox extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: null,\n      selectedLocation: null,\n      selectedDateRange: null\n    }\n    this.filterLocationData = this.filterLocationData.bind(this);\n    this.findLocations = this.findLocations.bind(this);\n    this.handleLocationChange = this.handleLocationChange.bind(this);\n    this.handleSelectedDateRange = this.handleSelectedDateRange.bind(this);\n\n\n  }\n\n  componentDidMount() {\n    let request = new Request()\n    request.get('/api/properties').then(data => {\n      this.setState({\n        data: data\n      })\n    })\n  }\n\n  componentDidUpdate(prevState) {\n    if (prevState !== this.state.data) {\n      this.filterLocationData()\n    }\n  }\n\n  findLocations() {\n\n    if (!this.state.data._embedded.properties) return null;\n\n    const locations = this.state.data._embedded.properties.map((location) => {\n      return location.location\n    })\n\n    return locations\n  }\n\n  filterLocationData() {\n    const newLocations = this.findLocations();\n\n    const filteredData = newLocations.filter((location, pos, self) => {\n      return self.indexOf(location) === pos;\n    })\n    console.log(filteredData);\n    return filteredData\n  }\n\n  handleLocationChange(booking) {\n\n    console.log(booking.location)\n    if (!booking) return null;\n    this.setState({ selectedLocation: booking.location })\n  }\n\n  handleSelectedDateRange(booking) {\n    if (!booking) return null;\n    this.setState({ selectedDateRange: booking.dateRange })\n  }\n\n\n  render() {\n    if (!this.state.data) return null;\n\n    return (\n      <div className=\"search\">\n        <div className=\"search-header-container\">\n          <SearchForm\n            handleSelectedDateRange={this.handleSelectedDateRange}\n            handleLocationChange={this.handleLocationChange}\n            filteredLocationOptions={this.filterLocationData()}\n            fullData={this.state.data._embedded.properties}\n            passToApp={this.props.passToApp}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default SearchFormBox\n"]},"metadata":{},"sourceType":"module"}